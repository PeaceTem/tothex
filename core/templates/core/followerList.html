{% extends 'base.html' %}
{% load static %}
{% block title %}
Followers
{% endblock title %}


{% block css %}
<link rel="stylesheet" href="/static/core/css/follows.css">
{% endblock css %}


{% block content %}

{% include 'core/header.html' %}

{% include 'search.html' %}

{% if object_type == 'following' %}

    {% for obj in objects.following.all %}
    <div class="followers">
        {{obj}} 
        <a class="clickable" href="{% url 'follow-action' follower_id obj.id 'unfollow' %}"><button style="border-radius:4px; padding: 3px; border:none; color: #fff; background:#f11919;">Unfollow</button></a> 
    </div>
    <br>

    {% endfor %}

{% elif object_type == 'followers' %}

    {% for obj in objects.followers.all %}
    <div>

        {{obj}} 
        {% if obj in objects.following.all %}
            <i style="font-size: 11px; color: #666; background:#eee;">followed</i>
        {% else %}
            <a class="clickable" href="{% url 'follow-action' follower_id obj.id 'follow' %}"><button style="border-radius:4px; padding: 3px; border:none; color: #fff; background:#f11919;">Follow</button></a> 
        {% endif %}
    </div>
    <br>

    {% endfor %}

{% endif %}
    <br>
    <br>
<!-- Add jquery -->

{% include 'jquery.html' %}
{% include 'loading.html' %}

<script>
    $(document).ready(function(){

$('.clickable').click(function(e){
        e.preventDefault();
        // Add a logic that removes the user that's not the creator of this quiz
        // let ans = confirm('This change is permanent\nAre you sure you want to delete this question?');
        // if (ans == true){
            const objectBx = $(this);
            $.ajax({
                type: 'GET',
                url : $(this).attr('href'),
                data : {
                },
                success : function(response){
                    objectBx.parent().css({'background-color':'#ddd','border-radius':'4px'})
                    objectBx.remove()
                    alert("This action is successful!")

                },
                error : function(){
                    alert('It falis silently!')
                }

            });
        });
    })
      
</script>

{% endblock content %}